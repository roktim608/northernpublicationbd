import{c as o}from"./p-25433d0f.js";import{g as i}from"./p-f70181c4.js";import{g as d}from"./p-c6074574.js";import{i as l}from"./p-c06b2e12.js";import{u as n,a as v}from"./p-28aaf9ba.js";import{o as t}from"./p-2934ec66.js";const{productDonation:u}=i(),s=Object.keys(u||{}).reduce(((o,u)=>{var c;const n=d(u);return(null==n?void 0:n.id)&&(o[u]={...o[u],...(null==n?void 0:n.ad_hoc_amount)?{ad_hoc_amount:n.ad_hoc_amount}:{},...(null==n?void 0:n.price)?{selectedPrice:n.price}:{},custom_amount:(null===(c=o[u].amounts||[])||void 0===c?void 0:c.includes(n.ad_hoc_amount))?null:n.ad_hoc_amount}),o}),u),{state:c,onChange:a,on:r,set:e,get:m,dispose:p}=o({...s},((o,u)=>JSON.stringify(o)!==JSON.stringify(u))),f=o=>{const u=c[o],n=(u.amounts||[]).filter((o=>l(o,u.selectedPrice)));return n.includes(null==u?void 0:u.ad_hoc_amount)?null==u?void 0:u.ad_hoc_amount:n[0]},_=o=>{const u=c[o];return(u.amounts||[]).filter((o=>l(o,u.selectedPrice)))},j=(o,u)=>{c[o]={...c[o],...u}},h=(o,u)=>{const c=d(o);return(null==c?void 0:c.id)?n({id:c.id,data:{...{price:c.price.id,...(null==c?void 0:c.ad_hoc_amount)?{ad_hoc_amount:null==c?void 0:c.ad_hoc_amount}:{}},...u}}):v(u)};t("checkout",(()=>{Object.keys(c).forEach((o=>{var u;const n=d(o);if(n)return e(o,{...c[o],selectedPrice:n.price,ad_hoc_amount:n.ad_hoc_amount,custom_amount:(null===(u=c[o].amounts||[])||void 0===u?void 0:u.includes(n.ad_hoc_amount))?null:n.ad_hoc_amount});e(o,{...c[o],selectedPrice:null,ad_hoc_amount:null,custom_amount:null})}))})),Object.keys(c).forEach((o=>{r("set",((u,c,n)=>{var t,d,i,a,e,s;if(u===o&&((null==c?void 0:c.selectedPrice)||(null==c?void 0:c.ad_hoc_amount)||(null==c?void 0:c.custom_amount))&&((null===(t=null==c?void 0:c.selectedPrice)||void 0===t?void 0:t.id)!==(null===(d=null==n?void 0:n.selectedPrice)||void 0===d?void 0:d.id)||(null==c?void 0:c.ad_hoc_amount)!==(null==n?void 0:n.ad_hoc_amount)||(null==c?void 0:c.custom_amount)!==(null==n?void 0:n.custom_amount))){const u=(null==c?void 0:c.custom_amount)&&l(null==c?void 0:c.custom_amount,c.selectedPrice)?null==c?void 0:c.custom_amount:f(o),n=(null===(i=c.selectedPrice)||void 0===i?void 0:i.id)||(null===(s=null===(e=null===(a=c.product)||void 0===a?void 0:a.prices)||void 0===e?void 0:e.data.find((o=>null==o?void 0:o.ad_hoc)))||void 0===s?void 0:s.id);if(!n)return;h(o,{price:n,quantity:1,ad_hoc_amount:u})}}))}));export{r as a,e as b,_ as c,p as d,m as g,a as o,c as s,j as u};