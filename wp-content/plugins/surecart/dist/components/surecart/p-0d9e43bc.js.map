{"version":3,"names":["window","addEventListener","e","fbq","eventDetail","detail","search_string","searchString","content_ids","searchResultIds","_a","searchCollections","length","content_category","join","product","id","_b","product_collections","data","map","collection","name","content_name","_c","variant_options","content_type","contents","quantity","currency","_d","price","value","maybeConvertAmount","_e","amount","_f"],"sources":["./src/store/product/facebook.ts"],"sourcesContent":["import { maybeConvertAmount } from 'src/functions/currency';\nimport { ProductsSearchedParams } from 'src/types';\n\n/**\n * Handle search event.\n */\nwindow.addEventListener('scSearched', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const eventDetail: ProductsSearchedParams = e.detail;\n\n  window.fbq('track', 'Search', {\n    search_string: eventDetail.searchString,\n    content_ids: eventDetail.searchResultIds,\n    ...(!!eventDetail?.searchCollections?.length ? { content_category: eventDetail.searchCollections.join(',') } : {}),\n  });\n});\n\n/**\n * Handle view content event.\n */\nwindow.addEventListener('scProductViewed', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const product = e.detail;\n\n  window.fbq('track', 'ViewContent', {\n    content_ids: [product.id],\n    content_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n    content_name: product?.name + (product?.variant_options?.length ? ` - ${product?.variant_options.join(' / ')}` : ''),\n    content_type: 'product',\n    contents: [\n      {\n        id: product.id,\n        quantity: 1,\n      },\n    ],\n    currency: product?.price?.currency,\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n  });\n});\n"],"mappings":"oCAMAA,OAAOC,iBAAiB,cAAc,SAAUC,G,MAC9C,KAAKF,SAAM,MAANA,cAAM,SAANA,OAAQG,KAAK,OAElB,MAAMC,EAAsCF,EAAEG,OAE9CL,OAAOG,IAAI,QAAS,SAAU,CAC5BG,cAAeF,EAAYG,aAC3BC,YAAaJ,EAAYK,uBACnBC,EAAAN,IAAW,MAAXA,SAAW,SAAXA,EAAaO,qBAAiB,MAAAD,SAAA,SAAAA,EAAEE,QAAS,CAAEC,iBAAkBT,EAAYO,kBAAkBG,KAAK,MAAS,IAEnH,IAKAd,OAAOC,iBAAiB,mBAAmB,SAAUC,G,gBACnD,KAAKF,SAAM,MAANA,cAAM,SAANA,OAAQG,KAAK,OAElB,MAAMY,EAAUb,EAAEG,OAElBL,OAAOG,IAAI,QAAS,cAAe,CACjCK,YAAa,CAACO,EAAQC,IACtBH,kBAAkBI,GAAAP,EAAAK,IAAO,MAAPA,SAAO,SAAPA,EAASG,uBAAmB,MAAAR,SAAA,SAAAA,EAAES,QAAI,MAAAF,SAAA,SAAAA,EAAEG,KAAIC,GAAcA,EAAWC,OAAMR,KAAK,MAC9FS,cAAcR,IAAO,MAAPA,SAAO,SAAPA,EAASO,SAAQE,EAAAT,IAAO,MAAPA,SAAO,SAAPA,EAASU,mBAAe,MAAAD,SAAA,SAAAA,EAAEZ,QAAS,MAAMG,IAAO,MAAPA,SAAO,SAAPA,EAASU,gBAAgBX,KAAK,SAAW,IACjHY,aAAc,UACdC,SAAU,CACR,CACEX,GAAID,EAAQC,GACZY,SAAU,IAGdC,UAAUC,EAAAf,IAAO,MAAPA,SAAO,SAAPA,EAASgB,SAAK,MAAAD,SAAA,SAAAA,EAAED,SAC1BG,MAAOC,IAAmBC,EAAAnB,EAAQgB,SAAK,MAAAG,SAAA,SAAAA,EAAEC,SAAU,IAAGC,EAAArB,EAAQgB,SAAK,MAAAK,SAAA,SAAAA,EAAEP,WAAY,QAErF"}