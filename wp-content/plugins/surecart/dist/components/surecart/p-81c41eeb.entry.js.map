{"version":3,"names":["scLicensesListCss","wp","i18n","__","h","slot","style","width","this","licenses","map","key","status","activations","activation_limit","renderStatus","_a","pagination"],"sources":["./src/components/controllers/dashboard/sc-licenses-list/sc-licenses-list.css?tag=sc-licenses-list&encapsulation=shadow","./src/components/controllers/dashboard/sc-licenses-list/sc-licenses-list.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { Activation, License } from '../../../../types';\n\n@Component({\n  tag: 'sc-licenses-list',\n  styleUrl: 'sc-licenses-list.css',\n  shadow: true,\n})\nexport class ScLicensesList {\n  @Prop() licenses: License[] = [];\n  @Prop() activations: Activation[] = [];\n  @Prop() heading: string;\n  @Prop() copied: boolean;\n\n  renderStatus(status) {\n    if (status === 'active') {\n      return <sc-tag type=\"success\">{__('Active', 'surecart')}</sc-tag>;\n    }\n    if (status === 'revoked') {\n      return <sc-tag type=\"danger\">{__('Revoked', 'surecart')}</sc-tag>;\n    }\n    if (status === 'inactive') {\n      return <sc-tag type=\"info\">{__('Inactive', 'surecart')}</sc-tag>;\n    }\n\n    return <sc-tag type=\"info\">{status}</sc-tag>;\n  }\n\n  async copyKey(key: string) {\n    try {\n      await navigator.clipboard.writeText(key);\n      this.copied = true;\n\n      setTimeout(() => {\n        this.copied = false;\n      }, 2000);\n    } catch (err) {\n      console.error(err);\n      alert(__('Error copying to clipboard', 'surecart'));\n    }\n  }\n\n  render() {\n    return (\n      <sc-dashboard-module class=\"purchase\" part=\"base\">\n        <span slot=\"heading\">\n          <slot name=\"heading\">{this.heading || __('License Keys', 'surecart')}</slot>\n        </span>\n        <sc-card no-padding>\n          <sc-table>\n            <sc-table-cell slot=\"head\">{__('Key', 'surecart')}</sc-table-cell>\n            <sc-table-cell slot=\"head\" style={{ width: '100px' }}>\n              {__('Status', 'surecart')}\n            </sc-table-cell>\n            <sc-table-cell slot=\"head\" style={{ width: '100px' }}>\n              {__('Activations', 'surecart')}\n            </sc-table-cell>\n            {this.licenses.map(({ key, status, activations, activation_limit }) => {\n              return (\n                <sc-table-row style={{ '--columns': '3' }}>\n                  <sc-table-cell>\n                    <sc-input value={key} readonly>\n                      <sc-button type=\"default\" size=\"small\" slot=\"suffix\" onClick={() => this.copyKey(key)}>\n                        {this.copied ? __('Copied!', 'surecart') : __('Copy', 'surecart')}\n                      </sc-button>\n                    </sc-input>\n                  </sc-table-cell>\n                  <sc-table-cell>{this.renderStatus(status)}</sc-table-cell>\n                  <sc-table-cell>\n                    {activations?.pagination?.count} / {activation_limit || <span>&infin;</span>}\n                  </sc-table-cell>\n                </sc-table-row>\n              );\n            })}\n          </sc-table>\n        </sc-card>\n      </sc-dashboard-module>\n    );\n  }\n}\n"],"mappings":"2CAAA,MAAMA,EAAoB,uB,6LCiBWC,GAAAC,KAAAC,GAAE,qB,qDAGHF,GAAAC,KAAAC,GAAE,sB,oDAGJF,GAAAC,KAAAC,GAAE,uB,2LAgBxBF,GAAAC,KAAAC,GAAE,yC,2IAQkCF,GAAAC,KAAAC,GAAE,6BAAAC,EAAA,8BAAAA,EAAA,gBAAAA,EAAA,iBAAAC,KAAA,QAIVJ,GAAAC,KAAAC,GAAE,mBAAAC,EAAA,iBAAAC,KAAA,OAAAC,MAAA,CAAAC,MAAA,UAE3BN,GAAAC,KAAAC,GAAE,sBAAAC,EAAA,iBAAAC,KAAA,OAAAC,MAAA,CAAAC,MAAA,UAGFN,GAAAC,KAAAC,GAAE,2BAAAK,KAAAC,SAAAC,KAAA,EAAAC,MAAAC,SAAAC,cAAAC,uB,sNAQsBb,GAAAC,KAAAC,GAAE,sBAA0BF,GAAAC,KAAAC,GAAE,sBAAAC,EAAA,qBAAAI,KAAAO,aAAAH,IAAAR,EAAA,sBAAAY,EAAAH,IAAA,MAAAA,SAAA,SAAAA,EAAAI,cAAA,MAAAD,SAAA,S"}