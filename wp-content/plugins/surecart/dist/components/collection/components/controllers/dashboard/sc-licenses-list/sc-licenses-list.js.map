{"version":3,"file":"sc-licenses-list.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/sc-licenses-list/sc-licenses-list.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { Activation, License } from '../../../../types';\n\n@Component({\n  tag: 'sc-licenses-list',\n  styleUrl: 'sc-licenses-list.css',\n  shadow: true,\n})\nexport class ScLicensesList {\n  @Prop() licenses: License[] = [];\n  @Prop() activations: Activation[] = [];\n  @Prop() heading: string;\n  @Prop() copied: boolean;\n\n  renderStatus(status) {\n    if (status === 'active') {\n      return <sc-tag type=\"success\">{__('Active', 'surecart')}</sc-tag>;\n    }\n    if (status === 'revoked') {\n      return <sc-tag type=\"danger\">{__('Revoked', 'surecart')}</sc-tag>;\n    }\n    if (status === 'inactive') {\n      return <sc-tag type=\"info\">{__('Inactive', 'surecart')}</sc-tag>;\n    }\n\n    return <sc-tag type=\"info\">{status}</sc-tag>;\n  }\n\n  async copyKey(key: string) {\n    try {\n      await navigator.clipboard.writeText(key);\n      this.copied = true;\n\n      setTimeout(() => {\n        this.copied = false;\n      }, 2000);\n    } catch (err) {\n      console.error(err);\n      alert(__('Error copying to clipboard', 'surecart'));\n    }\n  }\n\n  render() {\n    return (\n      <sc-dashboard-module class=\"purchase\" part=\"base\">\n        <span slot=\"heading\">\n          <slot name=\"heading\">{this.heading || __('License Keys', 'surecart')}</slot>\n        </span>\n        <sc-card no-padding>\n          <sc-table>\n            <sc-table-cell slot=\"head\">{__('Key', 'surecart')}</sc-table-cell>\n            <sc-table-cell slot=\"head\" style={{ width: '100px' }}>\n              {__('Status', 'surecart')}\n            </sc-table-cell>\n            <sc-table-cell slot=\"head\" style={{ width: '100px' }}>\n              {__('Activations', 'surecart')}\n            </sc-table-cell>\n            {this.licenses.map(({ key, status, activations, activation_limit }) => {\n              return (\n                <sc-table-row style={{ '--columns': '3' }}>\n                  <sc-table-cell>\n                    <sc-input value={key} readonly>\n                      <sc-button type=\"default\" size=\"small\" slot=\"suffix\" onClick={() => this.copyKey(key)}>\n                        {this.copied ? __('Copied!', 'surecart') : __('Copy', 'surecart')}\n                      </sc-button>\n                    </sc-input>\n                  </sc-table-cell>\n                  <sc-table-cell>{this.renderStatus(status)}</sc-table-cell>\n                  <sc-table-cell>\n                    {activations?.pagination?.count} / {activation_limit || <span>&infin;</span>}\n                  </sc-table-cell>\n                </sc-table-row>\n              );\n            })}\n          </sc-table>\n        </sc-card>\n      </sc-dashboard-module>\n    );\n  }\n}\n"]}