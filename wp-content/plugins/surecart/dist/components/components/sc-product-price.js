import{proxyCustomElement,HTMLElement,h,Fragment,Host}from"@stencil/core/internal/client";import{s as state}from"./watchers.js";import{i as intervalString}from"./price.js";import{d as defineCustomElement$5}from"./sc-format-number2.js";import{d as defineCustomElement$4}from"./sc-price-range2.js";import{d as defineCustomElement$3}from"./sc-tag2.js";import{d as defineCustomElement$2}from"./sc-visually-hidden2.js";const scProductPriceCss=":host{display:block}.price{display:flex;flex-direction:column;gap:var(--sc-spacing-xxx-small);text-align:var(--sc-product-price-alignment, left);justify-content:var(--sc-product-price-alignment, left)}.price__amounts{display:inline-flex;flex-wrap:wrap;align-items:baseline;gap:var(--sc-spacing-xx-small);justify-content:var(--sc-product-price-alignment, left);text-align:var(--sc-product-price-alignment, left)}.price__scratch{text-decoration:line-through;opacity:0.75}.price__interval{font-size:min(var(--sc-font-size-small), 16px);opacity:0.75}.price__details{font-size:min(var(--sc-font-size-small), 16px);opacity:0.75}.price__sale-badge{font-size:min(1em, 14px);align-self:center}",ScProductPrice$1=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.prices=void 0,this.saleText=void 0,this.productId=void 0}renderRange(){var e,t,r,i;return 1===(null===(t=null===(e=state[this.productId])||void 0===e?void 0:e.prices)||void 0===t?void 0:t.length)?this.renderPrice(null===(r=state[this.productId])||void 0===r?void 0:r.prices[0]):h("sc-price-range",{prices:null===(i=state[this.productId])||void 0===i?void 0:i.prices})}renderVariantPrice(e){var t,r;const i=null===(r=null===(t=state[this.productId])||void 0===t?void 0:t.variants)||void 0===r?void 0:r.find((t=>(null==t?void 0:t.id)===(null==e?void 0:e.id)));return this.renderPrice(state[this.productId].selectedPrice,null==i?void 0:i.amount)}renderPrice(e,t){var r;const i=null!==(r=null!=t?t:null==e?void 0:e.amount)&&void 0!==r?r:0;return(null==e?void 0:e.ad_hoc)?wp.i18n.__("Custom Amount","surecart"):h(Fragment,null,h("div",{class:"price",id:"price"},h("div",{class:"price__amounts"},!!(null==e?void 0:e.scratch_amount)&&(null==e?void 0:e.scratch_amount)!==i&&h(Fragment,null,0===(null==e?void 0:e.scratch_amount)?wp.i18n.__("Free","surecart"):h(Fragment,null,h("sc-visually-hidden",null,wp.i18n.__("The price was","surecart")," "),h("sc-format-number",{class:"price__scratch",part:"price__scratch",type:"currency",currency:e.currency,value:null==e?void 0:e.scratch_amount}),h("sc-visually-hidden",null," ",wp.i18n.__("now discounted to","surecart")))),0===i?wp.i18n.__("Free","surecart"):h("sc-format-number",{class:"price__amount",type:"currency",value:i,currency:null==e?void 0:e.currency}),h("div",{class:"price__interval"},(null==e?void 0:e.recurring_period_count)&&1<(null==e?void 0:e.recurring_period_count)&&h("sc-visually-hidden",null," ",wp.i18n.__("This is a repeating price. Payment will happen","surecart")," ",intervalString(e,{showOnce:!0,abbreviate:!1,labels:{interval:wp.i18n.__("every","surecart"),period:
/** translators: used as in time period: "for 3 months" */
wp.i18n.__("for","surecart")}})),h("span",{"aria-hidden":"true"},intervalString(e,{showOnce:!0,abbreviate:!1,labels:{interval:"/",period:
/** translators: used as in time period: "for 3 months" */
wp.i18n.__("for","surecart")}}))),!!(null==e?void 0:e.scratch_amount)&&h("sc-tag",{type:"primary",pill:!0,class:"price__sale-badge"},this.saleText||h(Fragment,null,h("sc-visually-hidden",null,wp.i18n.__("This product is available for sale.","surecart")," "),h("span",{"aria-hidden":"true"},wp.i18n.__("Sale","surecart"))))),(!!(null==e?void 0:e.trial_duration_days)||!!(null==e?void 0:e.setup_fee_enabled)&&(null==e?void 0:e.setup_fee_amount))&&h("div",{class:"price__details"},!!(null==e?void 0:e.trial_duration_days)&&h(Fragment,null,h("sc-visually-hidden",null,wp.i18n.sprintf(wp.i18n.__("You have a %d-day trial before payment becomes necessary.","surecart"),e.trial_duration_days)),h("span",{class:"price__trial","aria-hidden":"true"},wp.i18n.sprintf(wp.i18n._n("Starting in %s day.","Starting in %s days.",e.trial_duration_days,"surecart"),e.trial_duration_days))),!!(null==e?void 0:e.setup_fee_enabled)&&(null==e?void 0:e.setup_fee_amount)&&h("span",{class:"price__setup-fee"},h("sc-visually-hidden",null,wp.i18n.__("This product has","surecart")," "),h("sc-format-number",{type:"currency",value:Math.abs(e.setup_fee_amount),currency:null==e?void 0:e.currency})," ",(null==e?void 0:e.setup_fee_name)||((null==e?void 0:e.setup_fee_amount)<0?wp.i18n.__("Discount","surecart"):wp.i18n.__("Setup Fee","surecart")),"."))))}render(){return h(Host,{role:"paragraph"},(()=>{var e,t;return(null===(e=state[this.productId])||void 0===e?void 0:e.selectedVariant)?this.renderVariantPrice(null===(t=state[this.productId])||void 0===t?void 0:t.selectedVariant):state[this.productId].selectedPrice?this.renderPrice(state[this.productId].selectedPrice):state[this.productId].prices.length?this.renderRange():h("slot",null)})())}static get style(){return scProductPriceCss}},[1,"sc-product-price",{prices:[16],saleText:[1,"sale-text"],productId:[1,"product-id"]}]);function defineCustomElement$1(){"undefined"!=typeof customElements&&["sc-product-price","sc-format-number","sc-price-range","sc-tag","sc-visually-hidden"].forEach((e=>{switch(e){case"sc-product-price":customElements.get(e)||customElements.define(e,ScProductPrice$1);break;case"sc-format-number":customElements.get(e)||defineCustomElement$5();break;case"sc-price-range":customElements.get(e)||defineCustomElement$4();break;case"sc-tag":customElements.get(e)||defineCustomElement$3();break;case"sc-visually-hidden":customElements.get(e)||defineCustomElement$2()}}))}const ScProductPrice=ScProductPrice$1,defineCustomElement=defineCustomElement$1;export{ScProductPrice,defineCustomElement};