"use strict";const watchers=require("./watchers-8902837a.js"),ui=require("./ui-9bbf7d3b.js"),mutations=require("./mutations-8708a408.js"),addQueryArgs=require("./add-query-args-17c551b6.js"),submitCartForm=async e=>{var t,r,i,o,d,a;const s=watchers.state[e];if(s&&(null===(t=s.selectedPrice)||void 0===t?void 0:t.id)&&(!(null===(r=s.selectedPrice)||void 0===r?void 0:r.ad_hoc)||null!==s.adHocAmount&&void 0!==s.adHocAmount))try{watchers.setProduct(e,{busy:!0}),await mutations.addCheckoutLineItem({price:null===(i=s.selectedPrice)||void 0===i?void 0:i.id,quantity:Math.max((null===(o=s.selectedPrice)||void 0===o?void 0:o.ad_hoc)?1:s.quantity,1),...(null===(d=s.selectedPrice)||void 0===d?void 0:d.ad_hoc)?{ad_hoc_amount:s.adHocAmount}:{},variant:null===(a=s.selectedVariant)||void 0===a?void 0:a.id}),ui.toggleCart(!0),watchers.setProduct(e,{dialog:null})}catch(e){throw console.error(e),watchers.state.error=e,e}finally{watchers.setProduct(e,{busy:!1})}},getProductBuyLink=(e,t,r={})=>{var i,o,d,a,s,l,c;const u=watchers.state[e];if(u&&(null===(i=u.selectedPrice)||void 0===i?void 0:i.id)&&(!(null===(o=u.selectedPrice)||void 0===o?void 0:o.ad_hoc)||u.adHocAmount))return addQueryArgs.addQueryArgs(t,{line_items:[{price:null===(d=u.selectedPrice)||void 0===d?void 0:d.id,quantity:Math.max((null===(a=u.selectedPrice)||void 0===a?void 0:a.ad_hoc)?1:u.quantity,1),...(null===(s=u.selectedPrice)||void 0===s?void 0:s.ad_hoc)?{ad_hoc_amount:u.adHocAmount}:{},...(null===(l=u.selectedVariant)||void 0===l?void 0:l.id)?{variant:null===(c=u.selectedVariant)||void 0===c?void 0:c.id}:{}}],...r})},getAdditionalErrorMessages=e=>((null==e?void 0:e.additional_errors)||[]).map((e=>e.message)),getTopLevelError=e=>{var t;return"checkout.invalid"===(null==e?void 0:e.code)&&(null===(t=getAdditionalErrorMessages(e))||void 0===t?void 0:t.length)?"":null==e?void 0:e.message};exports.getAdditionalErrorMessages=getAdditionalErrorMessages,exports.getProductBuyLink=getProductBuyLink,exports.getTopLevelError=getTopLevelError,exports.submitCartForm=submitCartForm;